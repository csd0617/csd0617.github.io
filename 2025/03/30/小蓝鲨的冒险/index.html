<p><img src="/../picture/image-20250330101955635.png" alt="image-20250330101955635"></p>
<p><strong>get传参b&#x3D;a[0]&#x3D;QLTHNDT</strong></p>
<p>md5弱比较  这里是0e绕过    QNKCDZO与QLTHNDT经过md5编码后都是0e开头</p>
<p>因为<strong>PHP 试图解析它们为数值</strong>，发现它们符合 <code>0eX</code>（科学计数法），都被解释为 <strong><code>0 * 10^X = 0</code></strong>。</p>
<p>结果是 <code>0 == 0</code>，所以 <strong>返回 <code>true</code></strong>。</p>
<p>然后post  num</p>
<p>num&#x3D;2024  不能有字母    intval($num,0)&#x3D;2024</p>
<p>小数点绕过即可   </p>
<p><strong>post传参num&#x3D;2024.1</strong></p>
<p>intval() 转换小数类型时，只返回个位数，不遵循四舍五入的原则。</p>
<p>接下来是一个switch循环   </p>
<p><strong>get传参  which&#x3D;flag</strong></p>
<p>在 PHP 中，<code>switch</code> 语句的比较是通过 <strong>严格比较（&#x3D;&#x3D;）</strong> 来进行的。当你传递一个非数字字符串（例如 <code>&quot;flag&quot;</code>）时，PHP 会<strong>尝试将其转换为数字</strong>。这个转换过程有些特殊，通常会把任何非数字字符串转换为 <strong><code>0</code></strong>。</p>
<p>也就是</p>
<ul>
<li>PHP 会自动尝试将 <code>&quot;flag&quot;</code> 转换为数字。在 PHP 中，<strong>任何非数字字符串</strong>（例如 <code>&quot;flag&quot;</code>）都会被转换为数字 <code>0</code>。</li>
<li>因此，<code>switch(&quot;flag&quot;)</code> 会变成 <code>switch(0)</code>，然后与 <code>case 0</code> 进行匹配。</li>
<li>结果会进入 <code>case 0</code> 分支，并执行 <code>print(&#39;QAQ&#39;);</code>，然后因为没有 <code>break</code>，会继续执行后面的 <code>case</code>1  csae2 语句。</li>
</ul>
<p><strong>为什么要传  flag呢？</strong></p>
<p><code>require_once</code> 会将指定的文件包含到当前文件中，从而使得该文件中的代码能够在当前文件中使用。</p>
<p>require_once（）也就是一个文件包含函数    与include类似（这里也就是一个文件包含漏洞）</p>
<p><strong><code>include</code>和<code>require</code>区别主要是，<code>include</code>在包含的过程中如果出现错误，会抛出一个警告，程序继续正常运行；而<code>require</code>函数出现错误的时候，会直接报错并退出程序的执行。</strong></p>
<p><strong>而<code>include_once()</code>，<code>require_once()</code>这两个函数，与前两个的不同之处在于这两个函数只包含一次，适用于在脚本执行期间同一个文件有可能被包括超过一次的情况下，你想确保它只被包括一次以避免函数重定义，变量重新赋值等问题。</strong></p>
<p>而传flag的原因就是   </p>
<p>该目录下有flag.php这个文件   可以使用require_once进行文件包含  而不报错   从而执行echo  flag这条命令</p>
<p><strong>为什么只有flag.php才能输出flag   而index.php等其他文件不能呢</strong>？</p>
<p>因为$flag  这个变量只在flag.php文件下存在   只有将flag.php包含  才能正确输出来$flag变量的内容</p>
<p>所以这里的payload为</p>
<p>get  ：  ?b&#x3D;a[0]&#x3D;QLTHNDT&amp;which&#x3D;flag</p>
<p>post:     num&#x3D;2024.1</p>
<p><img src="/../picture/image-20250330104552398.png" alt="image-20250330104552398"></p>
